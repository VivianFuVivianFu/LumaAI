# ============================================
# Luma Backend - Environment Variables
# ============================================
# Copy this file to .env and fill in your values

# ============================================
# SERVER CONFIGURATION
# ============================================
NODE_ENV=production
PORT=4000

# Frontend URL (for CORS)
# Development: http://localhost:3000
# Production: https://luma-dusky.vercel.app
FRONTEND_URL=https://your-vercel-app.vercel.app

# ============================================
# SUPABASE DATABASE
# ============================================
# Get these from: https://app.supabase.com/project/_/settings/api
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your_supabase_anon_key_here
SUPABASE_SERVICE_ROLE_KEY=your_supabase_service_role_key_here

# ============================================
# OPENAI API
# ============================================
# Get your API key from: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-proj-your-openai-api-key-here

# ============================================
# LANGFUSE OBSERVABILITY (Optional)
# ============================================
# Get these from: https://cloud.langfuse.com
# Leave empty to disable tracing
LANGFUSE_SECRET_KEY=sk-lf-your-secret-key
LANGFUSE_PUBLIC_KEY=pk-lf-your-public-key
LANGFUSE_HOST=https://cloud.langfuse.com

# ============================================
# REDIS CACHE (Required for Memory System)
# ============================================
# Used for caching, session management, and real-time features
# Format for Redis Cloud: redis://default:password@host:port
REDIS_URL=redis://default:lUcNSQRWWmkhzGotKL57qVPGQnIMmDfP@redis-13610.c82.us-east-1-2.ec2.redns.redis-cloud.com:13610

# ============================================
# MEMORY SYSTEM CONFIGURATION
# ============================================
# Master switch for entire memory system
MEMORY_SYSTEM_ENABLED=true

# Enable AI enrichment (sentiment, themes, tags, summary)
MEMORY_ENRICHMENT_ENABLED=true

# Enable OpenAI embedding generation (required for semantic search)
MEMORY_EMBEDDING_ENABLED=true

# Enable relation detection (expensive - start disabled)
MEMORY_RELATIONS_ENABLED=false

# Enable context synthesis (AI-powered context summaries)
MEMORY_SYNTHESIS_ENABLED=true

# Enable weekly summary generation
MEMORY_WEEKLY_SUMMARIES_ENABLED=true

# Enable Langfuse tracing for memory operations (adds latency)
MEMORY_LANGFUSE_ENABLED=false

# Cache TTL in seconds (default: 3600 = 1 hour)
MEMORY_CACHE_TTL_SECONDS=3600

# Maximum number of context blocks to retrieve (default: 10)
MEMORY_MAX_CONTEXT_BLOCKS=10

# Minimum similarity threshold for semantic search (0.00-1.00, default: 0.75)
MEMORY_SIMILARITY_THRESHOLD=0.75

# Relation detection rate limit per hour per user (default: 5)
MEMORY_RELATION_DETECTION_RATE_LIMIT=5

# Batch size for enrichment processing (default: 10)
MEMORY_ENRICHMENT_BATCH_SIZE=10

# Fail fast mode: throw errors instead of graceful fallback (default: false)
MEMORY_FAIL_FAST=false

# Number of retry attempts for failed operations (default: 3)
MEMORY_RETRY_ATTEMPTS=3

# Backoff delay for retries in milliseconds (default: 1000)
MEMORY_RETRY_BACKOFF_MS=1000

# Worker configuration
MEMORY_WORKER_ENABLED=true
MEMORY_WORKER_POLL_INTERVAL_MS=1000
MEMORY_WORKER_MAX_CONCURRENT_JOBS=5
MEMORY_WORKER_JOB_TIMEOUT_MS=30000
MEMORY_WORKER_HEALTH_CHECK_INTERVAL_MS=60000
